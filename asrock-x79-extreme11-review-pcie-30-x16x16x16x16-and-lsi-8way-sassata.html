<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Testing the LSI SAS 2308 PCIe Controller | ZestBlog</title><meta name=generator content="Hugo 0.98.0"><meta name=description content="Testing the LSI SAS 2308 PCIe Controller
As part of this review, ASRock were kind enough to provide a set of eight ADATA XPG SX910 256GB drives in order to test the LSI SAS/SATA ports on the motherboard.  These drives are rated for 500 MBps+ sequential read and write speeds, and are based on the LSI SF-2281 controller.  Due to the routing of the LSI chip via PCIe 3.0 lanes, our bandwidth ceiling is lifted as we do not have to go via the chipset."><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/cayman.css><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=./favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=./favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><section class=page-header><h1 class=project-name>ZestBlog</h1><h2 class=project-tagline></h2><nav><a href=./index.html class=btn>Blog</a>
<a href=./sitemap.xml class=btn>Sitemap</a>
<a href=./index.xml class=btn>RSS</a></nav></section><section class=main-content><h1>Testing the LSI SAS 2308 PCIe Controller</h1><div><strong>Publish date: </strong>2024-07-07</div><p><strong>Testing the LSI SAS 2308 PCIe Controller</strong></p><p>As part of this review, ASRock were kind enough to provide a set of <a href=#>eight ADATA XPG SX910 256GB</a> drives in order to test the LSI SAS/SATA ports on the motherboard.&nbsp; These drives are rated for 500 MBps+ sequential read and write speeds, and are based on the LSI SF-2281 controller.&nbsp; Due to the routing of the LSI chip via PCIe 3.0 lanes, our bandwidth ceiling is lifted as we do not have to go via the chipset.</p><p>The LSI SAS controller supports SAS2 and SATA 6 Gbps drives.&nbsp; This is in comparison to the C60x server based chipsets for Sandy Bridge-E and Xeon processors based on the 2011 socket, which allow for up to eight SAS/SATA drives limited to SATA 3 Gbps and chipset throughput.&nbsp;</p><p>The LSI controller allows for RAID 0, 1 and 10 only, which is a little odd.&nbsp; I would have expected some users to require RAID 5 or 6.&nbsp; Running eight drives in RAID 0 is a unique real world scenario, due to the fail rate potentially wiping all the data, but it does allow us to study peak throughput.&nbsp; Thus the preferred scenario here will be RAID 10 across eight drives, thus taking advantage of striping across 4 of the drives but also having them mirrored.</p><p>The LSI platform is very easy to use.&nbsp; With the drives plugged in and powered (I had to rummage for suitable power connectors), the LSI software provided (MegaRAID) on the ASRock Driver DVD is loaded and run.&nbsp; After a login screen, we are presented with the following:</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20RAID%2001%20-%20Main_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>In order to create array, we select the ‘Create Virtual Drive’ option.&nbsp; We then get an option to select either an Easy mode for creating the virtual drive, or an advanced mode.&nbsp; Both are very limited in their options, especially as we can only choose one stripe size – 64KB.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20RAID%2002%20-%20Create_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20RAID%2003%20-%20Simple_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20RAID%2004%20-%20Accept_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>The virtual drive then needs to be mounted in Windows, using the Disk Management tool.</p><p>The LSI chip by default is set to run in PCIe 3.0 mode in the BIOS.&nbsp; There is also an option to allow booting from the LSI chip, via Port 7.&nbsp; This unfortunately adds a large amount of time to the booting of the system, around 40-50 more seconds.</p><p>With this in mind, we tested several scenarios for bandwidth and 4K performance with the LSI chip.&nbsp; As the LSI has no access to additional cache like a PCIe card, we will see that the peak performance lies more in bulk sequential transfers, rather than small transfers.</p><p>For the tests, we used the standard ATTO benchmark and the following scenarios in RAID-0:</p><p>LSI Chip with 1, 2, 3, 4, 5, 6, 7, 8 drives (listed as SAS x) via MegaRAID<br>Chipset with 1, 2 drives on SATA 6 Gbps (listed as x+0)<br>Chipset with 1, 2, 3, 4 drives on SATA 3 Gbps (listed as (0+x)<br>Chipset with 1 drive on SATA 6 Gbps and 1, 2, 3, 4 drives on SATA 3 Gbps (listed as 1+x)<br>Chipset with 2 drives on SATA 6 Gbps and 1, 2, 3, 4 drives on SATA 3 Gbps (listed as 2+x)</p><p>All chipset scenarios were set using the RAID from BIOS rather than in the OS.</p><p>In terms of peak speeds using ATTO, we recorded the following results:</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/Read%20Speeds%20Peak_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p align=center><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/Write%20Speeds%20Peak.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></p><p>There are plenty of conclusions to draw from this – for peak throughput, the LSI ports are preferred.&nbsp; When using the chipset connections, going from 2+0 to 2+1 will bring a drop in performance.&nbsp; Also worthy of note is our top speed with eight drives in RAID-0 – we hit 4.0 GBps read and 3.72 GBps write.&nbsp; We can see more by looking at how the chipset deals with reads and writes differently to the LSI chip:</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20Read%20with%20Chipset_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20Write%20with%20Chipset_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>In terms of write speeds, all the drive configurations perform nearly the same until the advantage of more drives takes over, and the LSI configurations of 3+ pull ahead.&nbsp; However, in the read speeds, all the chipset configurations that feature at least one SATA 6 Gbps drive have distinctly better read speeds below 64 KB transfer size.&nbsp; This could be due to some chipset caching or clever manipulation of the data.&nbsp; Thus for standard OS drives, putting two drives on the chipset SATA 6 Gbps ports will be more beneficial than using the LSI chip.</p><p>In terms of scaling, the LSI chip has the following 3D surfaces for read and write:</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20Read%20Speeds%202_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/6228/LSI%20Write%20Speeds_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>In both read and write, we only see any relevant scaling of drives beyond 128KB transfers.&nbsp; The large the transfer, the more the scaling becomes almost 1:1 as more drives are added.</p><p>Ultimately though, this may not be the best use case scenario for the product.&nbsp; As mentioned above, perhaps an eight drive RAID 10 array could be utilized with SAS drives, whereby the drive is more relevant to the speed than the port is (despite ASRock advertising stating peak throughputs).</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7orrAp5utnZOde6S7zGiqoaenZINzfpdomKyqn5i4bsSWcmSesKSnsq6xkGpkq52mnrK4ec%2BcoJ5lY2V6uX2VsWhvsGFrxXKCjJqlnWWcqLZuhNaasGarkajAosDAaGhp</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. © 2022. All rights reserved.</span></footer></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>